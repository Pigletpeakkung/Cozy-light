<html>
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Master Light Spot</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
      background-color: #f9f9f9;
      color: #333;
    }
    
    h2 {
      text-align: center;
      color: #5a3e36;
      margin-bottom: 30px;
      font-size: 2.2em;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    
    .cross-button-container {
      text-align: center;
      margin: 40px 20px;
      position: relative;
    }
    
    .cross-button {
      position: relative;
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #f8f3e6, #e8d8b5);
      border: none;
      border-radius: 15px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      z-index: 10;
    }
    
    .cross-vertical {
      position: absolute;
      top: 20px;
      left: 50%;
      width: 12px;
      height: 40px;
      background: #5a3e36;
      border-radius: 6px;
      transform: translateX(-50%);
      transition: all 0.3s ease;
    }
    
    .cross-horizontal {
      position: absolute;
      top: 50%;
      left: 20px;
      width: 40px;
      height: 12px;
      background: #5a3e36;
      border-radius: 6px;
      transform: translateY(-50%);
      transition: all 0.3s ease;
    }
    
    .cross-button:hover {
      background: linear-gradient(135deg, #e8d8b5, #d4c09c);
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }
    
    .cross-button:hover .cross-vertical,
    .cross-button:hover .cross-horizontal {
      background: #8b5a2b;
    }
    
    .cross-button.active {
      animation: warmGlow 4s ease-in-out;
    }
    
    @keyframes warmGlow {
      0% { box-shadow: 0 0 15px #FFD700, 0 0 30px #FFD700; }
      25% { box-shadow: 0 0 15px #FFA500, 0 0 30px #FFA500; }
      50% { box-shadow: 0 0 15px #FF6347, 0 0 30px #FF6347; }
      75% { box-shadow: 0 0 15px #FF4500, 0 0 30px #FF4500; }
      100% { box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
    }
    
    #passageOutput {
      margin: 30px auto;
      font-style: italic;
      color: #333;
      max-width: 600px;
      line-height: 1.8;
      font-size: 1.2em;
      text-align: center;
      padding: 20px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    
    #audioPlayer {
      margin: 20px;
      text-align: center;
    }
    
    #audioPlayer button {
      padding: 10px 20px;
      background: linear-gradient(to bottom, #f8f3e6, #e8d8b5);
      border: 1px solid #d4c09c;
      border-radius: 25px;
      cursor: pointer;
      font-size: 1em;
      color: #5a3e36;
      transition: all 0.3s ease;
    }
    
    #audioPlayer button:hover {
      background: linear-gradient(to bottom, #e8d8b5, #d4c09c);
      transform: translateY(-2px);
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    
    #shareButtons {
      text-align: center;
      margin: 30px;
    }
    
    #shareButtons a, #shareButtons button {
      padding: 10px 15px;
      background: linear-gradient(to bottom, #f8f3e6, #e8d8b5);
      text-decoration: none;
      color: #5a3e36;
      border-radius: 25px;
      margin: 8px;
      display: inline-block;
      border: 1px solid #d4c09c;
      transition: all 0.3s ease;
      font-size: 0.9em;
    }
    
    #shareButtons a:hover, #shareButtons button:hover {
      background: linear-gradient(to bottom, #e8d8b5, #d4c09c);
      transform: translateY(-2px);
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    
    #credit {
      font-size: 0.9em;
      color: #888;
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #eee;
    }
    
    canvas {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 1;
      opacity: 0.7;
    }
    
    .prompt-message {
      text-align: center;
      font-style: italic;
      color: #8b5a2b;
      margin: 20px auto;
      max-width: 500px;
      padding: 15px;
      background: rgba(255, 253, 245, 0.7);
      border-radius: 8px;
    }
  </style>
  <!-- Include GSAP for animations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
</head>
<body>
  <h2>Master Light Spot</h2>
  
  <div class="cross-button-container">
    <button aria-label="Generate a new inspirational quote" class="cross-button" id="crossButton" onclick="generatePassage()">
      <span class="cross-vertical"></span>
      <span class="cross-horizontal"></span>
    </button>
    <div id="passageOutput"></div>
    <div id="audioPlayer"></div>
    <div class="prompt-message" id="promptMessage"></div>
    <div id="shareButtons"></div>
  </div>
  
  <div id="credit">Quotes sourced from Conversations with God, Seth Speaks, Rumi, Alan Watts, Florence Scovel Shinn, Lao Tzu, Law of One, Emerald Tablet, Buddha, and Quotable API.</div>

  <script>
    // Passages array with all requested quotes plus new Seth Speaks quotes
    let passages = [
      // Conversations with God
      { text: "There is no such thing as 'wrong,' only what does not serve you. You cannot make a mistake, you can only make a choice.", id: 1, source: "Conversations with God" },
      { text: "The purpose of life is to know yourself, create yourself, and experience yourself as Who You Really Are.", id: 2, source: "Conversations with God" },
      { text: "Life is an ongoing process of creation. You are creating your reality with every thought, word, and action.", id: 3, source: "Conversations with God" },
      { text: "Fear is the opposite of love. Every thought, word, or deed is founded in one or the other.", id: 4, source: "Conversations with God" },
      { text: "You are not here to learn lessons; you are here to remember who you are.", id: 5, source: "Conversations with God" },
      { text: "The highest purpose of any soul is to be fully self-expressed in its divinity.", id: 6, source: "Conversations with God" },
      { text: "God is not a singular super-being, but the energy of life, and you are part of it.", id: 7, source: "Conversations with God" },
      // Seth Speaks
      { text: "You create your own reality. There are no limitations to the self except those you believe in.", id: 8, source: "Seth Speaks" },
      { text: "The universe is a multidimensional school, and you are here to learn and explore your own consciousness.", id: 9, source: "Seth Speaks" },
      { text: "Your beliefs form your experience, as surely as clay shapes a pot.", id: 10, source: "Seth Speaks" },
      { text: "There is no separation between you and All That Is; you are an eternal portion of it.", id: 11, source: "Seth Speaks" },
      { text: "The present is the point of power, where all realities intersect.", id: 12, source: "Seth Speaks" },
      { text: "Your inner self knows its purpose, and it guides you through every moment.", id: 13, source: "Seth Speaks" },
      { text: "Consciousness creates form, not the other way around.", id: 14, source: "Seth Speaks" },
      { text: "You are not a puppet of fate, but a creator of your own destiny.", id: 64, source: "Seth Speaks" },
      { text: "The soul is not bound by time or space, but dances through both.", id: 65, source: "Seth Speaks" },
      { text: "Every moment is a new creation, born of your inner thoughts.", id: 66, source: "Seth Speaks" },
      { text: "Your reality is a canvas, and your beliefs are the brush.", id: 67, source: "Seth Speaks" },
      { text: "There is no end to the self, only new beginnings in consciousness.", id: 68, source: "Seth Speaks" },
      // Bible
      { text: "Blessed are the meek, for they shall inherit the earth.", id: 69, source: "Matthew 5:5" },
      { text: "Be still, and know that I am God.", id: 70, source: "Psalm 46:10" },
      { text: "For God so loved the world that he gave his only Son, that whoever believes in him should not perish but have eternal life.", id: 71, source: "John 3:16" },
      // Add more passages as needed...
    ];

    // Track used passages
    let usedPassages = JSON.parse(localStorage.getItem('usedPassages')) || [];
    let isGenerating = false;

    // Create sacred geometry patterns
    function createSacredPattern(type = 'flower') {
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = 600;
      canvas.height = 600;
      canvas.style.position = 'fixed';
      canvas.style.top = '50%';
      canvas.style.left = '50%';
      canvas.style.transform = 'translate(-50%, -50%)';
      canvas.style.pointerEvents = 'none';
      canvas.style.zIndex = '1';
      canvas.style.opacity = '0';
      
      ctx.strokeStyle = 'rgba(139, 90, 43, 0.3)';
      ctx.lineWidth = 2;
      
      if (type === 'flower') {
        // Flower of Life pattern
        const centerX = 300;
        const centerY = 300;
        const radius = 100;
        const circles = 6;
        
        // Draw center circle
        ctx.beginPath();
        ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
        ctx.stroke();
        
        // Draw surrounding circles
        for (let i = 0; i < circles; i++) {
          const angle = (i * 2 * Math.PI) / circles;
          const x = centerX + Math.cos(angle) * radius;
          const y = centerY + Math.sin(angle) * radius;
          
          ctx.beginPath();
          ctx.arc(x, y, radius, 0, 2 * Math.PI);
          ctx.stroke();
        }
      } else if (type === 'seed') {
        // Seed of Life pattern
        const centerX = 300;
        const centerY = 300;
        const radius = 100;
        const circles = 6;
        
        for (let i = 0; i < circles; i++) {
          const angle = (i * 2 * Math.PI) / circles;
          const x = centerX + Math.cos(angle) * radius;
          const y = centerY + Math.sin(angle) * radius;
          
          ctx.beginPath();
          ctx.arc(x, y, radius, 0, 2 * Math.PI);
          ctx.stroke();
        }
      } else if (type === 'metatron') {
        // Metatron's Cube pattern (simplified)
        const centerX = 300;
        const centerY = 300;
        const radius = 150;
        
        // Draw central hexagon
        ctx.beginPath();
        for (let i = 0; i < 6; i++) {
          const angle = (i * 2 * Math.PI) / 6;
          const x = centerX + Math.cos(angle) * radius;
          const y = centerY + Math.sin(angle) * radius;
          
          if (i === 0) {
            ctx.moveTo(x, y);
          } else {
            ctx.lineTo(x, y);
          }
        }
        ctx.closePath();
        ctx.stroke();
        
        // Draw connecting lines
        for (let i = 0; i < 6; i++) {
          const angle1 = (i * 2 * Math.PI) / 6;
          const x1 = centerX + Math.cos(angle1) * radius;
          const y1 = centerY + Math.sin(angle1) * radius;
          
          for (let j = i + 1; j < 6; j++) {
            const angle2 = (j * 2 * Math.PI) / 6;
            const x2 = centerX + Math.cos(angle2) * radius;
            const y2 = centerY + Math.sin(angle2) * radius;
            
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
          }
        }
      }
      
      return canvas;
    }

    function animateSacredGeometry() {
      const patterns = ['flower', 'seed', 'metatron'];
      const patternType = patterns[Math.floor(Math.random() * patterns.length)];
      const pattern = createSacredPattern(patternType);
      
      document.body.appendChild(pattern);
      
      gsap.to(pattern, {
        duration: 2,
        opacity: 0.7,
        scale: 0.8,
        rotation: 360,
        ease: "power2.out",
        onComplete: () => {
          gsap.to(pattern, {
            duration: 3,
            opacity: 0,
            scale: 1.2,
            onComplete: () => pattern.remove()
          });
        }
      });
    }

    // Fetch additional quotes from Quotable API
    async function fetchQuotes(limit = 5) {
      try {
        const response = await fetch(`https://api.quotable.io/quotes?tags=inspirational,spirituality&limit=${limit}`);
        const data = await response.json();
        return data.results.map((quote, index) => ({
          text: quote.content,
          id: `api-${index + 100}`,
          source: quote.author || "Quotable API"
        }));
      } catch (error) {
        console.error('Error fetching quotes:', error);
        document.getElementById('passageOutput').innerHTML = '<p>Unable to fetch new quotes. Please try again later.</p>';
        return [];
      }
    }

    // Update passages with fetched quotes
    async function updatePassages() {
      const newQuotes = await fetchQuotes();
      passages = [...passages, ...newQuotes];
      localStorage.setItem('passages', JSON.stringify(passages));
    }

    // Ensure voices are loaded
    let voicesLoaded = false;
    window.speechSynthesis.onvoiceschanged = () => {
      voicesLoaded = true;
    };

    // Generate audio using Web Speech API
    function generateAudio(text, autoPlay = false) {
      const audioPlayer = document.getElementById('audioPlayer');
      audioPlayer.innerHTML = '';

      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      utterance.pitch = 0.9;
      utterance.rate = 1;

      // Select a voice
      if (voicesLoaded) {
        const voices = window.speechSynthesis.getVoices();
        const preferredVoice = voices.find(voice => 
          voice.name.includes('Daniel') || 
          voice.name.includes('Google UK English Male') ||
          voice.name.includes('Microsoft David Desktop')
        );
        if (preferredVoice) {
          utterance.voice = preferredVoice;
        }
      }

      // Add prompt message
      const promptMessage = document.getElementById('promptMessage');
      promptMessage.textContent = "May the light of this sacred word fill your heart with hope and guide your path today.";

      // Auto-play if triggered by button click
      if (autoPlay) {
        window.speechSynthesis.speak(utterance);
      }

      // Add manual play button
      const playButton = document.createElement('button');
      playButton.textContent = 'Play Verse Again';
      playButton.onclick = () => {
        window.speechSynthesis.speak(utterance);
        promptMessage.textContent = "May the light of this sacred word fill your heart with hope and guide your path today.";
      };
      audioPlayer.appendChild(playButton);
    }

    // Generate sharing buttons
    function generateShareButtons(text) {
      const shareButtons = document.getElementById('shareButtons');
      shareButtons.innerHTML = '';

      const encodedText = encodeURIComponent(text);
      const shareData = {
        title: 'Sacred Wisdom',
        text: text,
        url: window.location.href
      };

      if (navigator.share) {
        const shareBtn = document.createElement('button');
        shareBtn.textContent = 'Share This Wisdom';
        shareBtn.onclick = () => navigator.share(shareData);
        shareButtons.appendChild(shareBtn);
      }

      const platforms = [
        { name: 'X', url: `https://x.com/intent/post?text=${encodedText}` },
        { name: 'Facebook', url: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareData.url)}&quote=${encodedText}` },
        { name: 'WhatsApp', url: `https://api.whatsapp.com/send?text=${encodedText}` },
        { name: 'Email', url: `mailto:?subject=${encodeURIComponent(shareData.title)}&body=${encodedText}%0A${shareData.url}` }
      ];

      platforms.forEach(platform => {
        const btn = document.createElement('a');
        btn.href = platform.url;
        btn.textContent = `Share on ${platform.name}`;
        btn.target = '_blank';
        btn.rel = 'noopener noreferrer';
        shareButtons.appendChild(btn);
      });
    }

    // Generate a non-repeating random passage
    function generatePassage() {
      if (isGenerating) return;
      isGenerating = true;

      // Trigger glow animation
      const button = document.getElementById('crossButton');
      button.classList.add('active');
      
      // Animate sacred geometry
      animateSacredGeometry();
      
      setTimeout(() => {
        button.classList.remove('active');
        isGenerating = false;
      }, 4000);

      let availablePassages = passages.filter(p => !usedPassages.includes(p.id));

      if (availablePassages.length === 0) {
        usedPassages = [];
        availablePassages = passages;
      }

      const randomPassage = availablePassages[Math.floor(Math.random() * availablePassages.length)];
      usedPassages.push(randomPassage.id);
      localStorage.setItem('usedPassages', JSON.stringify(usedPassages));

      document.getElementById('passageOutput').innerHTML = `<p>"${randomPassage.text}"${randomPassage.source ? `<br><small>â€” ${randomPassage.source}</small>` : ''}</p>`;
      generateAudio(randomPassage.text, true);
      generateShareButtons(randomPassage.text);
    }

    // Add keyboard navigation
    document.getElementById('crossButton').addEventListener('keydown', (event) => {
      if (event.key === 'Enter' || event.key === ' ') {
        generatePassage();
      }
    });

    // Initialize by fetching quotes
    updatePassages();
  </script>
</body>
</html>
